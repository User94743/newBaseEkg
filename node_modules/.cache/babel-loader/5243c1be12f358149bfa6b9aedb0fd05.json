{"ast":null,"code":"import _slicedToArray from\"C:/Users/Admin/Desktop/my-app-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"C:/Users/Admin/Desktop/my-app-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";var _excluded=[\"listMachine\",\"accidents\",\"deleteAccident\",\"filterArray\",\"filterArrayMachine\"];import React,{useEffect,useState}from\"react\";import Menu from\"../../menu/menuContainer\";import AccidentView from\"./accidentView\";import style from\"./accident.module.css\";import{NavLink}from\"react-router-dom\";import Fuse from'fuse.js';import ReactPaginate from'react-paginate';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Accident=function Accident(_ref){var listMachine=_ref.listMachine,accidents=_ref.accidents,deleteAccident=_ref.deleteAccident,filterArray=_ref.filterArray,filterArrayMachine=_ref.filterArrayMachine,props=_objectWithoutProperties(_ref,_excluded);var _useState=useState('Экскаватор'),_useState2=_slicedToArray(_useState,2),machine=_useState2[0],setMachine=_useState2[1];var mass=machine==='Экскаватор'?accidents:filterArrayMachine;var onMachineChange=function onMachineChange(e){setMachine(e.target.value);filterArray(Number(e.target.value));mass=machine==='Экскаватор'?accidents:filterArrayMachine;};var _useState3=useState(mass),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];// machine === 'Экскаватор' ? accidents : accidents.filter(accident => accident.numberMachine === Number(machine))\nvar fuse=new Fuse(mass,{keys:[\"description\",\"part\",\"numberMachine\",\"nameAccident\"]});var searchData=function searchData(pattern){if(!pattern||pattern===''){setData(mass);}else{var result=fuse.search(pattern);var matches=[];if(!result.length){setData([]);}else{result.forEach(function(_ref2){var item=_ref2.item;matches.push(item);});setData(matches);}}};// PAGINATOR\nvar items=data;function Items(_ref3){var currentItems=_ref3.currentItems;return/*#__PURE__*/_jsx(_Fragment,{children:currentItems&&currentItems.map(function(l){return/*#__PURE__*/_jsx(AccidentView,{accident:l,deleteAccident:deleteAccident},l.id);})});}function PaginatedItems(_ref4){var itemsPerPage=_ref4.itemsPerPage;var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),currentItems=_useState6[0],setCurrentItems=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),pageCount=_useState8[0],setPageCount=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),itemOffset=_useState10[0],setItemOffset=_useState10[1];useEffect(function(){var endOffset=itemOffset+itemsPerPage;setCurrentItems(items.slice(itemOffset,endOffset));setPageCount(Math.ceil(items.length/itemsPerPage));},[itemOffset,itemsPerPage]);var handlePageClick=function handlePageClick(event){var newOffset=event.selected*itemsPerPage%items.length;setItemOffset(newOffset);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Items,{currentItems:currentItems}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(ReactPaginate,{nextLabel:\"\\u0412\\u043F\\u0435\\u0440\\u0435\\u0434\",onPageChange:handlePageClick,pageRangeDisplayed:2,marginPagesDisplayed:4,pageCount:pageCount,previousLabel:\"\\u041D\\u0430\\u0437\\u0430\\u0434\",pageClassName:\"page-item\",pageLinkClassName:\"page-link\",previousClassName:\"page-item\",previousLinkClassName:\"page-link\",nextClassName:\"page-item\",nextLinkClassName:\"page-link\",breakLabel:\"...\",breakClassName:\"page-item\",breakLinkClassName:\"page-link\",containerClassName:\"pagination\",activeClassName:\"active\",renderOnZeroPageCount:null})})]});}// Use Effect\nuseEffect(function(){setData(mass);},[accidents,mass]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container-lg center\",children:[/*#__PURE__*/_jsx(Menu,{}),/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar navbar-light bg-light\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(\"form\",{className:\"d-flex\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(\"div\",{className:style.filterAccident,children:/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return searchData(e.target.value);},className:\"form-control me-2\",type:\"search\",placeholder:\"\\u041F\\u043E\\u0438\\u0441\\u043A\",\"aria-label\":\"Search\"})}),/*#__PURE__*/_jsx(\"div\",{className:style.filterAccident,children:/*#__PURE__*/_jsxs(\"select\",{onChange:onMachineChange,className:\"form-select\",\"aria-label\":\"Default select example\",children:[/*#__PURE__*/_jsx(\"option\",{value:'Экскаватор',selected:true,children:\"\\u042D\\u043A\\u0441\\u043A\\u0430\\u0432\\u0430\\u0442\\u043E\\u0440\"}),listMachine.map(function(m){return/*#__PURE__*/_jsx(\"option\",{value:m.number,children:m.number});})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:style.filterAccident,children:/*#__PURE__*/_jsx(NavLink,{to:'/addaccident',className:\"btn btn-primary\",type:\"submit\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0430\\u0432\\u0430\\u0440\\u0438\\u044E\"})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(PaginatedItems,{itemsPerPage:4})]});};export default Accident;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/my-app-master/src/components/library/accident/accident.jsx"],"names":["React","useEffect","useState","Menu","AccidentView","style","NavLink","Fuse","ReactPaginate","Accident","listMachine","accidents","deleteAccident","filterArray","filterArrayMachine","props","machine","setMachine","mass","onMachineChange","e","target","value","Number","data","setData","fuse","keys","searchData","pattern","result","search","matches","length","forEach","item","push","items","Items","currentItems","map","l","id","PaginatedItems","itemsPerPage","setCurrentItems","pageCount","setPageCount","itemOffset","setItemOffset","endOffset","slice","Math","ceil","handlePageClick","event","newOffset","selected","filterAccident","m","number"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport Menu from \"../../menu/menuContainer\";\r\nimport AccidentView from \"./accidentView\";\r\nimport style from \"./accident.module.css\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport Fuse from 'fuse.js';\r\nimport ReactPaginate from 'react-paginate';\r\n\r\n\r\n\r\nconst Accident = ({listMachine, accidents, deleteAccident, filterArray, filterArrayMachine, ...props}) => {\r\n\r\n    const [machine, setMachine] = useState('Экскаватор');\r\n    let mass = machine === 'Экскаватор' ? accidents : filterArrayMachine;\r\n    let onMachineChange = (e) => {\r\n        setMachine(e.target.value);\r\n        filterArray(Number(e.target.value))\r\n        mass = machine === 'Экскаватор' ? accidents : filterArrayMachine\r\n    }\r\n\r\n    const [data, setData] = useState(mass);\r\n\r\n\r\n// machine === 'Экскаватор' ? accidents : accidents.filter(accident => accident.numberMachine === Number(machine))\r\n    const fuse = new Fuse(mass, {\r\n        keys: [\"description\", \"part\", \"numberMachine\", \"nameAccident\"],\r\n    });\r\n\r\n    const searchData = (pattern) => {\r\n        if (!pattern || pattern === '') {\r\n            setData(mass);\r\n        }\r\n        else {\r\n            const result = fuse.search(pattern);\r\n            const matches = [];\r\n\r\n            if (!result.length) {\r\n                setData([]);\r\n\r\n            } else {\r\n                result.forEach(({item}) => {\r\n                    matches.push(item);\r\n                });\r\n                setData(matches);\r\n            }\r\n        }\r\n    }\r\n\r\n// PAGINATOR\r\n\r\n    let items = data;\r\n\r\n    function Items({ currentItems }) {\r\n        return (\r\n            <>\r\n                {currentItems && currentItems.map(l =>\r\n                    <AccidentView accident={l} key={l.id} deleteAccident={deleteAccident} />\r\n                )}\r\n            </>\r\n        );\r\n    }\r\n\r\n    function PaginatedItems({ itemsPerPage}) {\r\n\r\n        const [currentItems, setCurrentItems] = useState(null);\r\n        const [pageCount, setPageCount] = useState(0);\r\n        const [itemOffset, setItemOffset] = useState(0);\r\n\r\n        useEffect(() => {\r\n            const endOffset = itemOffset + itemsPerPage;\r\n            setCurrentItems(items.slice(itemOffset, endOffset));\r\n            setPageCount(Math.ceil(items.length / itemsPerPage));\r\n        }, [itemOffset, itemsPerPage]);\r\n\r\n\r\n        const handlePageClick = (event) => {\r\n            const newOffset = (event.selected * itemsPerPage) % items.length;\r\n            setItemOffset(newOffset);\r\n        };\r\n\r\n        return (\r\n            <>\r\n                <Items currentItems={currentItems} />\r\n                <div className=\"d-flex justify-content-center\">\r\n                <ReactPaginate\r\n                    nextLabel=\"Вперед\"\r\n                    onPageChange={handlePageClick}\r\n                    pageRangeDisplayed={2}\r\n                    marginPagesDisplayed={4}\r\n                    pageCount={pageCount}\r\n                    previousLabel=\"Назад\"\r\n                    pageClassName=\"page-item\"\r\n                    pageLinkClassName=\"page-link\"\r\n                    previousClassName=\"page-item\"\r\n                    previousLinkClassName=\"page-link\"\r\n                    nextClassName=\"page-item\"\r\n                    nextLinkClassName=\"page-link\"\r\n                    breakLabel=\"...\"\r\n                    breakClassName=\"page-item\"\r\n                    breakLinkClassName=\"page-link\"\r\n                    containerClassName=\"pagination\"\r\n                    activeClassName=\"active\"\r\n                    renderOnZeroPageCount={null}\r\n                />\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n// Use Effect\r\n    useEffect(() => {\r\n            setData(mass)\r\n    }, [accidents, mass])\r\n\r\n    return <div className=\"container-lg center\">\r\n        <Menu/>\r\n\r\n        <nav className=\"navbar navbar-light bg-light\">\r\n            <div className=\"container-fluid\">\r\n                <form className=\"d-flex\">\r\n                    <div className=\"container-fluid\">\r\n                        <div className={style.filterAccident}>\r\n                            <input onChange={(e) => searchData(e.target.value)} className=\"form-control me-2\"\r\n                                   type=\"search\" placeholder=\"Поиск\" aria-label=\"Search\"/>\r\n                        </div>\r\n                        <div className={style.filterAccident}>\r\n                            <select onChange={onMachineChange} className=\"form-select\"\r\n                                    aria-label=\"Default select example\">\r\n                                <option value={'Экскаватор'} selected>Экскаватор</option>\r\n                                {listMachine.map(m =>\r\n                                    <option value={m.number}>{m.number}</option>\r\n                                )}\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n                <div className={style.filterAccident}>\r\n                    <NavLink to={'/addaccident'} className=\"btn btn-primary\" type=\"submit\">Добавить аварию</NavLink>\r\n                </div>\r\n            </div>\r\n            <br/>\r\n            <br/>\r\n        </nav>\r\n\r\n\r\n        <PaginatedItems itemsPerPage={4} />\r\n\r\n\r\n\r\n    </div>\r\n}\r\n\r\nexport default Accident;"]},"metadata":{},"sourceType":"module"}