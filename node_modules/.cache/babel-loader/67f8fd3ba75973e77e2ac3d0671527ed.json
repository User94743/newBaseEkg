{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Admin/Desktop/my-app-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Admin/Desktop/my-app-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"C:/Users/Admin/Desktop/my-app-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:/Users/Admin/Desktop/my-app-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{collection,addDoc,getDocs}from\"firebase/firestore\";import db from\"../fireBase\";import{doc,getDoc}from\"firebase/firestore\";var ADD_ACCIDENT='ADD-ACCIDENT';var DELETE_ACCIDENT='DELETE-ACCIDENT';var FILTER_ARRAY='FILTER-ARRAY';var INIT_TOGGLE='INIT-TOGGLE';var PUSH_LIST='PUSH-LIST';export var pushList=function pushList(listFire){return{type:PUSH_LIST,listFire:listFire};};export var initToggle=function initToggle(init){return{type:INIT_TOGGLE,init:init};};export var filterArray=function filterArray(filterMachine){return{type:FILTER_ARRAY,filterMachine:filterMachine};};export var addAccidentToState=function addAccidentToState(objAccident){return{type:ADD_ACCIDENT,objAccident:objAccident};};export var deleteAccident=function deleteAccident(idAccident){return{type:DELETE_ACCIDENT,idAccident:idAccident};};var initialState={init:false,filterArrayMachine:[],list:[{id:0,numberMachine:58,nku:'10-МК',clearDate:'',part:\"Двигатель напора\",nameAccident:\"Нет возбуждения правого двигателя напора\",description:\"bla bla bla bla bla bla bla bla bla bla bla bla bla\",date:\"21.04.2022 Время: 17:45\"},{id:1,numberMachine:71,nku:'Обн. эн.',clearDate:'',part:\"Двигатель хода левый\",nameAccident:\"Нет хода от поворота\",description:\"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",date:\"21.04.2022 Время: 17:45\"},{id:2,numberMachine:8,nku:'Granit',clearDate:'',part:\"Двигатель хода правый\",nameAccident:\"Нет хода от напора\",description:\"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",date:\"21.04.2022 Время: 17:45\"},{id:3,numberMachine:70,nku:'Обн. эн.',clearDate:'',part:\"БУСМ\",nameAccident:\"Не работает дисплей у БУСМа\",description:\"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",date:\"21.04.2022 Время: 17:45\"},{id:4,numberMachine:5,nku:'Granit',clearDate:'',part:\"Сборка\",nameAccident:\"Замена НКУ\",description:\"bla bla bla bla bla bla bla bla bla bla bla bla bla\",date:\"21.04.2022 Время: 17:45\"},{id:5,numberMachine:12,nku:'Электро Сила',clearDate:'',part:\"Двигатель подъема\",nameAccident:\"Нет задания\",description:\"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",date:\"21.04.2022 Время: 17:45\"},{id:6,numberMachine:14,nku:'Львов',clearDate:'',part:\"Кузовные вентиляторы\",nameAccident:\"Нет напряжения\",description:\"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",date:\"21.04.2022 Время: 17:45\"},{id:7,numberMachine:14,nku:'СуперПупер',clearDate:'',part:\"Командоконтроллер\",nameAccident:\"Нет задания\",description:\"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",date:\"21.04.2022 Время: 17:45\"}]};var accidentReducer=function accidentReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case PUSH_LIST:return _objectSpread(_objectSpread({},state),{},{list:action.listFire});case INIT_TOGGLE:return _objectSpread(_objectSpread({},state),{},{init:action.init});case FILTER_ARRAY:return _objectSpread(_objectSpread({},state),{},{filterArrayMachine:_toConsumableArray(state.list.filter(function(accident){return accident.numberMachine===action.filterMachine;}))});case ADD_ACCIDENT:return _objectSpread(_objectSpread({},state),{},{list:[].concat(_toConsumableArray(state.list),[action.objAccident])});case DELETE_ACCIDENT:return _objectSpread(_objectSpread({},state),{},{list:_toConsumableArray(state.list.filter(function(elem){return elem.id!==action.idAccident;})),filterArrayMachine:_toConsumableArray(state.filterArrayMachine.filter(function(elem){return elem.id!==action.idAccident;}))});default:return state;}};export var addAccidentToFireStore=function addAccidentToFireStore(objAccident){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var docRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return addDoc(collection(db,\"accidentsState\"),{objAccident:objAccident});case 3:docRef=_context.sent;dispatch(addAccidentToState(objAccident));_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(\"Error adding document: \",_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x){return _ref.apply(this,arguments);};}();};// export const requestAccidents = () => async (dispatch) => {\n//         const docRef = collection(db, \"accidentsState\");\n//         const docSnap = await getDocs(docRef);\n//         let tempArray = [];\n//         docSnap.forEach((doc) => {\n//             tempArray.push(doc.data().objAccident)\n//         });\n//         console.log(tempArray)\n//         dispatch(pushList(tempArray))\n//     // console.log(doc)\n//     // dispatch(addAccidentToState(doc.data().objAccident))\n// }\nexport default accidentReducer;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/my-app-master/src/redux/accidentReducer.js"],"names":["collection","addDoc","getDocs","db","doc","getDoc","ADD_ACCIDENT","DELETE_ACCIDENT","FILTER_ARRAY","INIT_TOGGLE","PUSH_LIST","pushList","listFire","type","initToggle","init","filterArray","filterMachine","addAccidentToState","objAccident","deleteAccident","idAccident","initialState","filterArrayMachine","list","id","numberMachine","nku","clearDate","part","nameAccident","description","date","accidentReducer","state","action","filter","accident","elem","addAccidentToFireStore","dispatch","docRef","console","error"],"mappings":"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","sourcesContent":["import {collection, addDoc, getDocs} from \"firebase/firestore\";\r\nimport db from \"../fireBase\";\r\nimport { doc, getDoc } from \"firebase/firestore\";\r\n\r\nconst ADD_ACCIDENT = 'ADD-ACCIDENT';\r\nconst DELETE_ACCIDENT = 'DELETE-ACCIDENT';\r\nconst FILTER_ARRAY = 'FILTER-ARRAY';\r\nconst INIT_TOGGLE = 'INIT-TOGGLE';\r\nconst PUSH_LIST = 'PUSH-LIST';\r\n\r\nexport const pushList = (listFire) => {\r\n    return {\r\n        type: PUSH_LIST,\r\n        listFire\r\n    }\r\n}\r\n\r\nexport const initToggle = (init) => {\r\n    return {\r\n        type: INIT_TOGGLE,\r\n        init\r\n    }\r\n}\r\n\r\nexport const filterArray = (filterMachine) => {\r\n    return {\r\n        type: FILTER_ARRAY,\r\n        filterMachine\r\n    }\r\n}\r\n\r\nexport const addAccidentToState = (objAccident) => {\r\n    return {\r\n        type: ADD_ACCIDENT,\r\n        objAccident\r\n    }\r\n}\r\n\r\nexport const deleteAccident = (idAccident) => {\r\n    return {\r\n        type: DELETE_ACCIDENT,\r\n        idAccident\r\n    }\r\n}\r\n\r\n\r\nlet initialState = {\r\n    init: false,\r\n    filterArrayMachine: [],\r\n    list: [\r\n        {\r\n            id: 0,\r\n            numberMachine: 58,\r\n            nku: '10-МК',\r\n            clearDate: '',\r\n            part: \"Двигатель напора\",\r\n            nameAccident: \"Нет возбуждения правого двигателя напора\",\r\n            description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla\",\r\n            date: \"21.04.2022 Время: 17:45\"\r\n        },\r\n        {\r\n            id: 1,\r\n            numberMachine: 71,\r\n            nku: 'Обн. эн.',\r\n            clearDate: '',\r\n            part: \"Двигатель хода левый\",\r\n            nameAccident: \"Нет хода от поворота\",\r\n            description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",\r\n            date: \"21.04.2022 Время: 17:45\"\r\n        },\r\n        {\r\n            id: 2,\r\n            numberMachine: 8,\r\n            nku: 'Granit',\r\n            clearDate: '',\r\n            part: \"Двигатель хода правый\",\r\n            nameAccident: \"Нет хода от напора\",\r\n            description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",\r\n            date: \"21.04.2022 Время: 17:45\"\r\n        },\r\n        {\r\n            id: 3,\r\n            numberMachine: 70,\r\n            nku: 'Обн. эн.',\r\n            clearDate: '',\r\n            part: \"БУСМ\",\r\n            nameAccident: \"Не работает дисплей у БУСМа\",\r\n            description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",\r\n            date: \"21.04.2022 Время: 17:45\"\r\n        },\r\n        {\r\n            id: 4,\r\n            numberMachine: 5,\r\n            nku: 'Granit',\r\n            clearDate: '',\r\n            part: \"Сборка\",\r\n            nameAccident: \"Замена НКУ\",\r\n            description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla\",\r\n            date: \"21.04.2022 Время: 17:45\"\r\n        },\r\n        {\r\n            id: 5,\r\n            numberMachine: 12,\r\n            nku: 'Электро Сила',\r\n            clearDate: '',\r\n            part: \"Двигатель подъема\",\r\n            nameAccident: \"Нет задания\",\r\n            description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",\r\n            date: \"21.04.2022 Время: 17:45\"\r\n        },\r\n        {\r\n            id: 6,\r\n            numberMachine: 14,\r\n            nku: 'Львов',\r\n            clearDate: '',\r\n            part: \"Кузовные вентиляторы\",\r\n            nameAccident: \"Нет напряжения\",\r\n            description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",\r\n            date: \"21.04.2022 Время: 17:45\"\r\n        },\r\n        {\r\n            id: 7,\r\n            numberMachine: 14,\r\n            nku: 'СуперПупер',\r\n            clearDate: '',\r\n            part: \"Командоконтроллер\",\r\n            nameAccident: \"Нет задания\",\r\n            description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",\r\n            date: \"21.04.2022 Время: 17:45\"\r\n        }\r\n    ]\r\n}\r\nconst accidentReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n\r\n        case PUSH_LIST:\r\n            return {\r\n                ...state,\r\n                list: action.listFire\r\n            }\r\n\r\n        case INIT_TOGGLE:\r\n            return {\r\n                ...state,\r\n                init: action.init\r\n            }\r\n\r\n        case FILTER_ARRAY:\r\n            return {\r\n                ...state,\r\n                filterArrayMachine: [...state.list.filter( accident => accident.numberMachine === action.filterMachine)]\r\n            }\r\n\r\n        case ADD_ACCIDENT:\r\n            return {\r\n                ...state,\r\n                list: [...state.list, action.objAccident]\r\n            }\r\n\r\n        case DELETE_ACCIDENT:\r\n            return {\r\n                ...state,\r\n                list: [...state.list.filter(elem => elem.id !== action.idAccident)],\r\n                filterArrayMachine: [...state.filterArrayMachine.filter(elem => elem.id !== action.idAccident)]\r\n            }\r\n\r\n        default: return state;\r\n    }\r\n}\r\n\r\nexport const addAccidentToFireStore = (objAccident) => async (dispatch) => {\r\n    try {\r\n        const docRef = await addDoc(collection(db, \"accidentsState\"), {\r\n            objAccident\r\n        });\r\n        dispatch(addAccidentToState(objAccident))\r\n\r\n    } catch (e) {\r\n        console.error(\"Error adding document: \", e);\r\n    }\r\n}\r\n\r\n// export const requestAccidents = () => async (dispatch) => {\r\n//         const docRef = collection(db, \"accidentsState\");\r\n//         const docSnap = await getDocs(docRef);\r\n//         let tempArray = [];\r\n//         docSnap.forEach((doc) => {\r\n//             tempArray.push(doc.data().objAccident)\r\n//         });\r\n//         console.log(tempArray)\r\n//         dispatch(pushList(tempArray))\r\n//     // console.log(doc)\r\n//     // dispatch(addAccidentToState(doc.data().objAccident))\r\n// }\r\n\r\nexport default accidentReducer;"]},"metadata":{},"sourceType":"module"}