{"ast":null,"code":"import _slicedToArray from\"C:/Users/Admin/Desktop/my-app-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Component,useEffect,useState}from\"react\";import Menu from\"../menu/menuContainer\";import BarChart from\"./barChart\";import LineChart from\"./DoughnutChart\";import PieChart from\"./pieChart\";import style from'./statistic.module.css';import DoughnutChart from\"./DoughnutChart\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Statistic=function Statistic(_ref){var accidents=_ref.accidents,listMachine=_ref.listMachine,addAccidentToState=_ref.addAccidentToState;var listNkuSystem=[];for(var i=0;i<listMachine.length;i++){var tempSchema=listMachine[i].schema;if(-1===listNkuSystem.indexOf(tempSchema)){listNkuSystem.push(tempSchema);}}for(var j=0;j<listNkuSystem.length;j++){listNkuSystem[j]={schema:listNkuSystem[j],count:0};for(var k=0;k<listMachine.length;k++){if(listNkuSystem[j].schema===listMachine[k].schema){listNkuSystem[j].count=listNkuSystem[j].count+1;}}}function GraphicDataFunc(){var acc=arguments.length>0&&arguments[0]!==undefined?arguments[0]:accidents;var arrayGraphicData=[];listMachine.map(function(machine){return arrayGraphicData.push({machineNum:Number(machine.number),countAccident:acc.filter(function(accident){return Number(accident.numberMachine)===Number(machine.number);}).length,nku:machine.schema});});return arrayGraphicData;}var onDataChange=function onDataChange(e){var valueNku=e.currentTarget.value;var tempGraphicData=GraphicDataFunc();if(valueNku==='Все НКУ'){setUserData(mainState(tempGraphicData,valueNku));}else{tempGraphicData=tempGraphicData.filter(function(dataNku){return dataNku.nku===valueNku;});setUserData(mainState(tempGraphicData,valueNku));}};// eslint-disable-next-line react-hooks/rules-of-hooks\nvar _useState=useState(mainState(GraphicDataFunc())),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var _useState3=useState(mainState(listNkuSystem)),_useState4=_slicedToArray(_useState3,2),nkuData=_useState4[0],setNkuData=_useState4[1];function mainState(arrayGraphicData){var nku=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'Все НКУ';return{labels:arrayGraphicData.map(function(data){return data.machineNum;}),datasets:[{label:nku,data:arrayGraphicData.map(function(data){return data.countAccident;}),backgroundColor:[\"rgb(6,255,255)\",\"rgb(255,53,53)\",\"rgb(136,255,88)\",\"rgb(166,0,163)\",\"rgb(255,215,64)\",\"rgb(52,88,255)\",\"rgb(255,137,99)\",\"rgb(238,113,255)\",\"rgb(255,21,100)\"],borderColor:\"#505050\",borderWidth:1}]};}function DoughnutFunc(data){return{labels:data.map(function(data){return data.schema;}),datasets:[{label:'Низковольтные комплектные устройства',data:data.map(function(data){return data.count;}),backgroundColor:[\"rgb(127,66,255)\",\"rgb(245,44,157)\",\"rgb(0,255,94)\",\"rgb(0,44,255)\",\"rgb(147,244,255)\",\"rgb(236,119,255)\",\"rgb(238,161,136)\"],borderColor:\"#505050\",borderWidth:1}]};}return/*#__PURE__*/_jsxs(\"div\",{className:\"container-lg center\",children:[/*#__PURE__*/_jsx(Menu,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{style:{width:420},children:/*#__PURE__*/_jsx(BarChart,{chartData:userData})}),/*#__PURE__*/_jsxs(\"span\",{style:{width:420},children:[\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u041D\\u041A\\u0423 \\u0434\\u043B\\u044F \\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0430 \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0438 \\u043F\\u043E \\u042D\\u041A\\u0413\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"select\",{onChange:onDataChange,className:\"form-select\",\"aria-label\":\"Default select example\",children:[/*#__PURE__*/_jsx(\"option\",{selected:true,children:\"\\u0412\\u0441\\u0435 \\u041D\\u041A\\u0423\"}),listNkuSystem.map(function(nku){return/*#__PURE__*/_jsx(\"option\",{value:nku.schema,children:nku.schema});})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{style:{width:420},children:/*#__PURE__*/_jsx(DoughnutChart,{chartData:DoughnutFunc(listNkuSystem)})})]})]})]});};// <div style={{ width: 480 }}>\n//     <LineChart chartData={userData} />\n// </div>\n// <div style={{ width: 480 }}>\n//     <PieChart chartData={userData} />\n// </div>\nexport default Statistic;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/my-app-master/src/components/statistic/statistic.jsx"],"names":["React","Component","useEffect","useState","Menu","BarChart","LineChart","PieChart","style","DoughnutChart","Statistic","accidents","listMachine","addAccidentToState","listNkuSystem","i","length","tempSchema","schema","indexOf","push","j","count","k","GraphicDataFunc","acc","arrayGraphicData","map","machine","machineNum","Number","number","countAccident","filter","accident","numberMachine","nku","onDataChange","e","valueNku","currentTarget","value","tempGraphicData","setUserData","mainState","dataNku","userData","nkuData","setNkuData","labels","data","datasets","label","backgroundColor","borderColor","borderWidth","DoughnutFunc","width"],"mappings":"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","sourcesContent":["import React, {Component, useEffect, useState} from \"react\";\r\nimport Menu from \"../menu/menuContainer\";\r\nimport BarChart from \"./barChart\";\r\nimport LineChart from \"./DoughnutChart\";\r\nimport PieChart from \"./pieChart\";\r\nimport style from './statistic.module.css'\r\nimport DoughnutChart from \"./DoughnutChart\";\r\n\r\nconst Statistic = ({accidents, listMachine, addAccidentToState}) => {\r\n\r\n    let listNkuSystem = [];\r\n\r\n    for (let i = 0; i < listMachine.length; i++) {\r\n        let tempSchema = listMachine[i].schema\r\n        if (-1 === listNkuSystem.indexOf(tempSchema)) {\r\n            listNkuSystem.push(tempSchema)\r\n        }\r\n    }\r\n    for (let j = 0; j < listNkuSystem.length; j++) {\r\n        listNkuSystem[j] = {schema: listNkuSystem[j], count: 0}\r\n        for (let k = 0; k < listMachine.length; k++) {\r\n              if (listNkuSystem[j].schema === listMachine[k].schema) {\r\n                  listNkuSystem[j].count = listNkuSystem[j].count + 1\r\n            }\r\n        }\r\n    }\r\n\r\n    function GraphicDataFunc(acc = accidents) {\r\n        let arrayGraphicData = [];\r\n\r\n        listMachine.map(\r\n            machine =>\r\n                arrayGraphicData.push({\r\n                    machineNum: Number(machine.number),\r\n                    countAccident: acc.filter(accident => Number(accident.numberMachine) === Number(machine.number)).length,\r\n                    nku: machine.schema\r\n                }))\r\n\r\n        return arrayGraphicData;\r\n    }\r\n\r\n    let onDataChange = (e) => {\r\n        let valueNku = e.currentTarget.value\r\n        let tempGraphicData = GraphicDataFunc()\r\n        if (valueNku === 'Все НКУ') {\r\n            setUserData(mainState(tempGraphicData, valueNku))\r\n        } else {\r\n            tempGraphicData = tempGraphicData.filter(dataNku => dataNku.nku === valueNku)\r\n            setUserData(mainState(tempGraphicData, valueNku))\r\n        }\r\n    }\r\n\r\n// eslint-disable-next-line react-hooks/rules-of-hooks\r\n    const [userData, setUserData] = useState(mainState(GraphicDataFunc()))\r\n    const [nkuData, setNkuData] = useState(mainState(listNkuSystem))\r\n\r\n    function mainState(arrayGraphicData, nku = 'Все НКУ') {\r\n        return {\r\n            labels: arrayGraphicData.map((data) => data.machineNum),\r\n            datasets: [\r\n                {\r\n                    label: nku,\r\n                    data: arrayGraphicData.map((data) => data.countAccident),\r\n                    backgroundColor: [\r\n                        \"rgb(6,255,255)\",\r\n                        \"rgb(255,53,53)\",\r\n                        \"rgb(136,255,88)\",\r\n                        \"rgb(166,0,163)\",\r\n                        \"rgb(255,215,64)\",\r\n                        \"rgb(52,88,255)\",\r\n                        \"rgb(255,137,99)\",\r\n                        \"rgb(238,113,255)\",\r\n                        \"rgb(255,21,100)\"\r\n                    ],\r\n                    borderColor: \"#505050\",\r\n                    borderWidth: 1,\r\n                },\r\n            ],\r\n        }\r\n    }\r\n\r\n    function DoughnutFunc(data) {\r\n        return {\r\n            labels: data.map((data) => data.schema),\r\n            datasets: [\r\n                {\r\n                    label: 'Низковольтные комплектные устройства',\r\n                    data: data.map((data) => data.count),\r\n                    backgroundColor: [\r\n                        \"rgb(127,66,255)\",\r\n                        \"rgb(245,44,157)\",\r\n                        \"rgb(0,255,94)\",\r\n                        \"rgb(0,44,255)\",\r\n                        \"rgb(147,244,255)\",\r\n                        \"rgb(236,119,255)\",\r\n                        \"rgb(238,161,136)\"\r\n                    ],\r\n                    borderColor: \"#505050\",\r\n                    borderWidth: 1,\r\n                },\r\n            ],\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"container-lg center\">\r\n        <Menu />\r\n            <div className=\"row\">\r\n                <div style={{ width: 420 }}>\r\n                    <BarChart chartData={userData} />\r\n                </div>\r\n                <span style={{ width: 420 }}>\r\n                    Выберите НКУ для просмотра статистики по ЭКГ\r\n                    <br/>\r\n                    <br/>\r\n                        <select onChange={onDataChange} className=\"form-select\" aria-label=\"Default select example\">\r\n                            <option selected>Все НКУ</option>\r\n                            {listNkuSystem.map(nku =>\r\n                                <option value={nku.schema}>{nku.schema}</option>\r\n                            )}\r\n                        </select>\r\n                </span>\r\n                <div>\r\n                    <br/>\r\n                    <br/>\r\n                    <br/>\r\n                     <div style={{ width: 420 }}>\r\n                         <DoughnutChart chartData={DoughnutFunc(listNkuSystem)} />\r\n                     </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        )\r\n\r\n}\r\n// <div style={{ width: 480 }}>\r\n//     <LineChart chartData={userData} />\r\n// </div>\r\n// <div style={{ width: 480 }}>\r\n//     <PieChart chartData={userData} />\r\n// </div>\r\nexport default Statistic;"]},"metadata":{},"sourceType":"module"}