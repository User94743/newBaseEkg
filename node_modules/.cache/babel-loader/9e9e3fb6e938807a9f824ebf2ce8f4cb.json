{"ast":null,"code":"import { collection, addDoc, getDocs } from \"firebase/firestore\";\nimport db from \"../fireBase\";\nimport { doc, getDoc } from \"firebase/firestore\";\nconst ADD_ACCIDENT = 'ADD-ACCIDENT';\nconst DELETE_ACCIDENT = 'DELETE-ACCIDENT';\nconst FILTER_ARRAY = 'FILTER-ARRAY';\nconst INIT_TOGGLE = 'INIT-TOGGLE';\nconst PUSH_LIST = 'PUSH-LIST';\nexport const pushList = listFire => {\n  return {\n    type: PUSH_LIST,\n    listFire\n  };\n};\nexport const initToggle = init => {\n  return {\n    type: INIT_TOGGLE,\n    init\n  };\n};\nexport const filterArray = filterMachine => {\n  return {\n    type: FILTER_ARRAY,\n    filterMachine\n  };\n};\nexport const addAccidentToState = objAccident => {\n  return {\n    type: ADD_ACCIDENT,\n    objAccident\n  };\n};\nexport const deleteAccident = idAccident => {\n  return {\n    type: DELETE_ACCIDENT,\n    idAccident\n  };\n};\nlet initialState = {\n  init: false,\n  filterArrayMachine: [],\n  list: [{\n    id: 0,\n    numberMachine: 58,\n    nku: '10-МК',\n    clearDate: '',\n    part: \"Двигатель напора\",\n    nameAccident: \"Нет возбуждения правого двигателя напора\",\n    description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla\",\n    date: \"21.04.2022 Время: 17:45\"\n  }, {\n    id: 1,\n    numberMachine: 71,\n    nku: 'Обн. эн.',\n    clearDate: '',\n    part: \"Двигатель хода левый\",\n    nameAccident: \"Нет хода от поворота\",\n    description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",\n    date: \"21.04.2022 Время: 17:45\"\n  }, {\n    id: 2,\n    numberMachine: 8,\n    nku: 'Granit',\n    clearDate: '',\n    part: \"Двигатель хода правый\",\n    nameAccident: \"Нет хода от напора\",\n    description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",\n    date: \"21.04.2022 Время: 17:45\"\n  }, {\n    id: 3,\n    numberMachine: 70,\n    nku: 'Обн. эн.',\n    clearDate: '',\n    part: \"БУСМ\",\n    nameAccident: \"Не работает дисплей у БУСМа\",\n    description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",\n    date: \"21.04.2022 Время: 17:45\"\n  }, {\n    id: 4,\n    numberMachine: 5,\n    nku: 'Granit',\n    clearDate: '',\n    part: \"Сборка\",\n    nameAccident: \"Замена НКУ\",\n    description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla\",\n    date: \"21.04.2022 Время: 17:45\"\n  }, {\n    id: 5,\n    numberMachine: 12,\n    nku: 'Электро Сила',\n    clearDate: '',\n    part: \"Двигатель подъема\",\n    nameAccident: \"Нет задания\",\n    description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",\n    date: \"21.04.2022 Время: 17:45\"\n  }, {\n    id: 6,\n    numberMachine: 14,\n    nku: 'Львов',\n    clearDate: '',\n    part: \"Кузовные вентиляторы\",\n    nameAccident: \"Нет напряжения\",\n    description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",\n    date: \"21.04.2022 Время: 17:45\"\n  }, {\n    id: 7,\n    numberMachine: 14,\n    nku: 'СуперПупер',\n    clearDate: '',\n    part: \"Командоконтроллер\",\n    nameAccident: \"Нет задания\",\n    description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",\n    date: \"21.04.2022 Время: 17:45\"\n  }]\n};\n\nconst accidentReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case PUSH_LIST:\n      return { ...state,\n        list: action.listFire\n      };\n\n    case INIT_TOGGLE:\n      return { ...state,\n        init: action.init\n      };\n\n    case FILTER_ARRAY:\n      return { ...state,\n        filterArrayMachine: [...state.list.filter(accident => accident.numberMachine === action.filterMachine)]\n      };\n\n    case ADD_ACCIDENT:\n      return { ...state,\n        list: [...state.list, action.objAccident]\n      };\n\n    case DELETE_ACCIDENT:\n      return { ...state,\n        list: [...state.list.filter(elem => elem.id !== action.idAccident)],\n        filterArrayMachine: [...state.filterArrayMachine.filter(elem => elem.id !== action.idAccident)]\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const addAccidentToFireStore = objAccident => async dispatch => {\n  try {\n    const docRef = await addDoc(collection(db, \"accidentsState\"), {\n      objAccident\n    });\n    dispatch(addAccidentToState(objAccident));\n  } catch (e) {\n    console.error(\"Error adding document: \", e);\n  }\n}; // export const requestAccidents = () => async (dispatch) => {\n//         const docRef = collection(db, \"accidentsState\");\n//         const docSnap = await getDocs(docRef);\n//         let tempArray = [];\n//         docSnap.forEach((doc) => {\n//             tempArray.push(doc.data().objAccident)\n//         });\n//         console.log(tempArray)\n//         dispatch(pushList(tempArray))\n//     // console.log(doc)\n//     // dispatch(addAccidentToState(doc.data().objAccident))\n// }\n\nexport default accidentReducer;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/my-app-master/src/redux/accidentReducer.js"],"names":["collection","addDoc","getDocs","db","doc","getDoc","ADD_ACCIDENT","DELETE_ACCIDENT","FILTER_ARRAY","INIT_TOGGLE","PUSH_LIST","pushList","listFire","type","initToggle","init","filterArray","filterMachine","addAccidentToState","objAccident","deleteAccident","idAccident","initialState","filterArrayMachine","list","id","numberMachine","nku","clearDate","part","nameAccident","description","date","accidentReducer","state","action","filter","accident","elem","addAccidentToFireStore","dispatch","docRef","e","console","error"],"mappings":"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","sourcesContent":["import {collection, addDoc, getDocs} from \"firebase/firestore\";\r\nimport db from \"../fireBase\";\r\nimport { doc, getDoc } from \"firebase/firestore\";\r\n\r\nconst ADD_ACCIDENT = 'ADD-ACCIDENT';\r\nconst DELETE_ACCIDENT = 'DELETE-ACCIDENT';\r\nconst FILTER_ARRAY = 'FILTER-ARRAY';\r\nconst INIT_TOGGLE = 'INIT-TOGGLE';\r\nconst PUSH_LIST = 'PUSH-LIST';\r\n\r\nexport const pushList = (listFire) => {\r\n    return {\r\n        type: PUSH_LIST,\r\n        listFire\r\n    }\r\n}\r\n\r\nexport const initToggle = (init) => {\r\n    return {\r\n        type: INIT_TOGGLE,\r\n        init\r\n    }\r\n}\r\n\r\nexport const filterArray = (filterMachine) => {\r\n    return {\r\n        type: FILTER_ARRAY,\r\n        filterMachine\r\n    }\r\n}\r\n\r\nexport const addAccidentToState = (objAccident) => {\r\n    return {\r\n        type: ADD_ACCIDENT,\r\n        objAccident\r\n    }\r\n}\r\n\r\nexport const deleteAccident = (idAccident) => {\r\n    return {\r\n        type: DELETE_ACCIDENT,\r\n        idAccident\r\n    }\r\n}\r\n\r\n\r\nlet initialState = {\r\n    init: false,\r\n    filterArrayMachine: [],\r\n    list: [\r\n        {\r\n            id: 0,\r\n            numberMachine: 58,\r\n            nku: '10-МК',\r\n            clearDate: '',\r\n            part: \"Двигатель напора\",\r\n            nameAccident: \"Нет возбуждения правого двигателя напора\",\r\n            description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla\",\r\n            date: \"21.04.2022 Время: 17:45\"\r\n        },\r\n        {\r\n            id: 1,\r\n            numberMachine: 71,\r\n            nku: 'Обн. эн.',\r\n            clearDate: '',\r\n            part: \"Двигатель хода левый\",\r\n            nameAccident: \"Нет хода от поворота\",\r\n            description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",\r\n            date: \"21.04.2022 Время: 17:45\"\r\n        },\r\n        {\r\n            id: 2,\r\n            numberMachine: 8,\r\n            nku: 'Granit',\r\n            clearDate: '',\r\n            part: \"Двигатель хода правый\",\r\n            nameAccident: \"Нет хода от напора\",\r\n            description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",\r\n            date: \"21.04.2022 Время: 17:45\"\r\n        },\r\n        {\r\n            id: 3,\r\n            numberMachine: 70,\r\n            nku: 'Обн. эн.',\r\n            clearDate: '',\r\n            part: \"БУСМ\",\r\n            nameAccident: \"Не работает дисплей у БУСМа\",\r\n            description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",\r\n            date: \"21.04.2022 Время: 17:45\"\r\n        },\r\n        {\r\n            id: 4,\r\n            numberMachine: 5,\r\n            nku: 'Granit',\r\n            clearDate: '',\r\n            part: \"Сборка\",\r\n            nameAccident: \"Замена НКУ\",\r\n            description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla\",\r\n            date: \"21.04.2022 Время: 17:45\"\r\n        },\r\n        {\r\n            id: 5,\r\n            numberMachine: 12,\r\n            nku: 'Электро Сила',\r\n            clearDate: '',\r\n            part: \"Двигатель подъема\",\r\n            nameAccident: \"Нет задания\",\r\n            description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",\r\n            date: \"21.04.2022 Время: 17:45\"\r\n        },\r\n        {\r\n            id: 6,\r\n            numberMachine: 14,\r\n            nku: 'Львов',\r\n            clearDate: '',\r\n            part: \"Кузовные вентиляторы\",\r\n            nameAccident: \"Нет напряжения\",\r\n            description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",\r\n            date: \"21.04.2022 Время: 17:45\"\r\n        },\r\n        {\r\n            id: 7,\r\n            numberMachine: 14,\r\n            nku: 'СуперПупер',\r\n            clearDate: '',\r\n            part: \"Командоконтроллер\",\r\n            nameAccident: \"Нет задания\",\r\n            description: \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla\",\r\n            date: \"21.04.2022 Время: 17:45\"\r\n        }\r\n    ]\r\n}\r\nconst accidentReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n\r\n        case PUSH_LIST:\r\n            return {\r\n                ...state,\r\n                list: action.listFire\r\n            }\r\n\r\n        case INIT_TOGGLE:\r\n            return {\r\n                ...state,\r\n                init: action.init\r\n            }\r\n\r\n        case FILTER_ARRAY:\r\n            return {\r\n                ...state,\r\n                filterArrayMachine: [...state.list.filter( accident => accident.numberMachine === action.filterMachine)]\r\n            }\r\n\r\n        case ADD_ACCIDENT:\r\n            return {\r\n                ...state,\r\n                list: [...state.list, action.objAccident]\r\n            }\r\n\r\n        case DELETE_ACCIDENT:\r\n            return {\r\n                ...state,\r\n                list: [...state.list.filter(elem => elem.id !== action.idAccident)],\r\n                filterArrayMachine: [...state.filterArrayMachine.filter(elem => elem.id !== action.idAccident)]\r\n            }\r\n\r\n        default: return state;\r\n    }\r\n}\r\n\r\nexport const addAccidentToFireStore = (objAccident) => async (dispatch) => {\r\n    try {\r\n        const docRef = await addDoc(collection(db, \"accidentsState\"), {\r\n            objAccident\r\n        });\r\n        dispatch(addAccidentToState(objAccident))\r\n\r\n    } catch (e) {\r\n        console.error(\"Error adding document: \", e);\r\n    }\r\n}\r\n\r\n// export const requestAccidents = () => async (dispatch) => {\r\n//         const docRef = collection(db, \"accidentsState\");\r\n//         const docSnap = await getDocs(docRef);\r\n//         let tempArray = [];\r\n//         docSnap.forEach((doc) => {\r\n//             tempArray.push(doc.data().objAccident)\r\n//         });\r\n//         console.log(tempArray)\r\n//         dispatch(pushList(tempArray))\r\n//     // console.log(doc)\r\n//     // dispatch(addAccidentToState(doc.data().objAccident))\r\n// }\r\n\r\nexport default accidentReducer;"]},"metadata":{},"sourceType":"module"}